!function(a){"function"!=typeof Object.create&&(Object.create=function(a){function t(){}return t.prototype=a,new t}),a.plugin=function(t,i){a.fn[t]=function(e){return this.each(function(){a.data(this,t)||a.data(this,t,Object.create(i).init(e,this))})}};var t={init:function(t,i){return this.options=a.extend({},this.options,t),this.elem=i,this.$elem=a(i),this._build(),this},options:{theme:"facilitas_modern",videoSpeed:1,fonts:new Array("Trebuchet MS","Arial","Times New Roman","Verdana","Helvetica","Courier New"),initVolume:.5,baseLangFolder:"js/",language:"en",availableLanguages:["en","pt"],enableKeyboard:!0,subtitleSrc:null,audiodesciption:null,version:"1.0",aboutUrl:"www.facilitasplayer.com",init:!1,seekSliding:!1,bufferSliding:!1,currentBuffer:0,volumeSliding:!1,isFullScreen:!1,isLightOn:!1,oldVol:null,hasTags:!1,debug:!0,subtitleCount:0,subtitleTotal:0,browserPrefix:null,browserPrefixes:"webkit moz o ms".split(" "),supportsFullScreen:!1,supportsSpeedChange:!1,loading:!0,sidebar_captionsearch:!1,sidebar_settings:!1,helpIsOpen:!1,caption_list_height:0,lang:{},body:null,video_parent:null,video_container:null,video_controls:null,facilitas_play:null,facilitas_stop:null,facilitas_speedup:null,facilitas_speeddown:null,facilitas_speedwarning:null,facilitas_search_btn:null,facilitas_settings_btn:null,facilitas_help:null,facilitas_help_btn:null,facilitas_video_seek:null,facilitas_video_buffer:null,facilitas_video_timer:null,facilitas_volume:null,facilitas_volume_btn:null,facilitas_volume_status:null,facilitas_cc:null,facilitas_cc_btn:null,facilitas_volume_slider:null,facilitas_viewport:null,facilitas_tags:null,facilitas_tags_goto:null,facilitas_progress:null,facilitas_toolbar:null,facilitas_subtitle:null,facilitas_light_bg:null,facilitas_light_toggle:null,facilitas_loading:null,facilitas_search_form:null,facilitas_search_result:null,facilitas_search_input:null,facilitas_search_inputbtn:null,facilitas_language:null,facilitas_toolbarposition:null,facilitas_fontbackground:null,facilitas_fontfamily:null,facilitas_fontcolor:null,facilitas_fontsize:null,videoObject:null,subtitle:null},_build:function(){var t=this,i=this.$elem,e=this.options;e.parent=i.parent(),e.body=a("body");var l=a("<div></div>").addClass("facilitas_player").addClass(e.theme);"undefined"!=typeof i.attr("width")&&l.width(i.attr("width")),"undefined"!=typeof i.attr("width")&&l.height(i.attr("height")),e.facilitas_light_bg=a("<div></div>").addClass("facilitas_light_bg").addClass(e.theme),a.getJSON(e.baseLangFolder+"FacilitasLang/"+e.language+".js",function(n){e.lang[e.language]=n;var s,o,c;"undefined"!=typeof i.attr("data-tagList")?(c="#"+i.attr("data-tagList"),o=a(c),o.length>0&&(s='<div class="facilitas_tags"><p class="facilitas_tags_goto">'+e.lang[e.language].tags.goTo+":</p></div>",e.hasTags=!0)):s="",a(".facilitas_tags",i).remove();var r=a('<div class="facilitas_progress">    <div class="facilitas_buffbar"></div>    <div class="facilitas_progbar">        <ul class="facilitas_stickers"></ul>    </div></div><div class="facilitas_toolbar">  <ul class="facilitas_controls" title="Toolbar">      <li><a href="#" class="facilitas_btn_play" title="'+e.lang[e.language].toolbar.play+'"><i class="fac-i-play"></i></a></li>      <li><a href="#" class="facilitas_btn_stop" title="'+e.lang[e.language].toolbar.stop+'"><i class="fac-i-stop"></i></a></a></li>      <li><a href="#" class="facilitas_btn_speeddown" title="'+e.lang[e.language].toolbar.rewind+'"><i class="fac-i-rewind"></i></a></a></li>      <li><a href="#" class="facilitas_btn_speedup" title="'+e.lang[e.language].toolbar.forward+'"><i class="fac-i-forward"></i></a></a>      <li title="'+e.lang[e.language].toolbar.time+'" class="facilitas_time"><div class="facilitas_timeupdate">00:00 / 00:00</div><div class="facilitas_speedwarning">2x</div></li></li>  </ul>  <ul class="facilitas_controls fr" title="Toolbar">      <li><a href="#" class="facilitas_btn_search" title="'+e.lang[e.language].toolbar.search+'"><i class="fac-i-search"></i></a></a></li>      <li><a href="#" class="facilitas_btn_cc" title="'+e.lang[e.language].toolbar.caption+'"><i class="fac-i-closedcaption"></i></a></a></li>      <li><a href="#" class="facilitas_btn_settings" title="'+e.lang[e.language].toolbar.settings+'"><i class="fac-i-settings"></i></a></a></li>      <li>          <a href="#" class="facilitas_btn_volume" title="'+e.lang[e.language].toolbar.volume+'">              <i class="vol_status fac-i-sound-half"></i>              <div class="facilitas_btn_container"></div>              <div class="facilitas_vol_container">                  <div class="facilitas_vol_wrapper">                      <div class="facilitas_control_volume_slider"></div>                  </div>              </div>          </a>      </li>      <li><a href="#" class="facilitas_btn_help" title="'+e.lang[e.language].toolbar.help+'"><i class="fac-i-help"></i></a></a></li>      <li><a href="#" class="facilitas_btn_viewport" title="'+e.lang[e.language].toolbar.viewport+'"><i class="fac-i-fullscreen-open"></i></a></a></li>  </ul></div><div class="facilitas_subtitle"></div><div class="facilitas_closedcaption"></div>'+s+'<div class="facilitas_help">  <span class="facilitas_help_title" title="'+e.lang[e.language].help.title+'">'+e.lang[e.language].help.title+'</span>  <div class="facilitas_help_content">      <ul>          <li title="'+e.lang[e.language].help.keyboard+'"><strong>'+e.lang[e.language].help.keyboard+'</strong></li>          <li title="P - '+e.lang[e.language].help.play+'"><strong>P</strong>'+e.lang[e.language].help.play+'</li>          <li title="Q - '+e.lang[e.language].help.stop+'"><strong>Q</strong>'+e.lang[e.language].help.stop+'</li>          <li title="S - '+e.lang[e.language].help.search+'"><strong>S</strong>'+e.lang[e.language].help.search+'</li>          <li title="E - '+e.lang[e.language].help.speeddown+'"><strong>O</strong>'+e.lang[e.language].help.speeddown+'</li>          <li title="O - '+e.lang[e.language].help.speedup+'"><strong>E</strong>'+e.lang[e.language].help.speedup+'</li>          <li title="[ - '+e.lang[e.language].help.rewind+'"><strong>O</strong>'+e.lang[e.language].help.rewind+'</li>          <li title="] - '+e.lang[e.language].help.forward+'"><strong>O</strong>'+e.lang[e.language].help.forward+'</li>          <li title="C - '+e.lang[e.language].help.caption+'"><strong>C</strong>'+e.lang[e.language].help.caption+'</li>          <li title="A - '+e.lang[e.language].help.volume+'"><strong>A</strong>'+e.lang[e.language].help.volume+'</li>          <li title="D - '+e.lang[e.language].help.decreaseVol+'"><strong>D</strong>'+e.lang[e.language].help.decreaseVol+'</li>          <li title="U - '+e.lang[e.language].help.increaseVol+'"><strong>U</strong>'+e.lang[e.language].help.increaseVol+'</li>          <li title="L - '+e.lang[e.language].help.viewport+'"><strong>L</strong>'+e.lang[e.language].help.viewport+'</li>          <li title="H - '+e.lang[e.language].help.help+'"><strong>H</strong>'+e.lang[e.language].help.help+'</li>      </ul>  </div>  <div class="facilitas_help_content facilitas_help_about">      <ul>          <li>Facilitas Player v'+e.version+'</li>          <li><a href="'+e.aboutUrl+'" target="_blank" title="Facilitas Player">'+e.aboutUrl+'</a></li>      </ul>  </div></div><section class="facilitas_sidebar facilitas_caption_search">  <header>      <div class="facilitas_sidebar_title" title="'+e.lang[e.language].sidebarSearch.title+'"><span>'+e.lang[e.language].sidebarSearch.title+'</span> <a href="#" class="facilitas_sidebar_close" title="'+e.lang[e.language].buttons.close+'"><i class="fac-i-close"></i></a></div>      <div class="facilitas_sidebar_search"><form class="facilitas_fsearch"><input type="text" class="facilitas_search_input" placeholder="'+e.lang[e.language].sidebarSearch.input+'" title="'+e.lang[e.language].sidebarSearch.input+'" /> <a href="#" class="facilitas_btn_inputsearch" title="'+e.lang[e.language].sidebarSearch.button+'"><i class="fac-i-search"></i></a></form></div>  </header>  <ol class="facilitas_search_result"></ol></section><section class="facilitas_sidebar facilitas_settings">  <header>      <div class="facilitas_sidebar_title" title="'+e.lang[e.language].sidebarSettings.title+'"><span>'+e.lang[e.language].sidebarSettings.title+'</span> <a href="#" class="facilitas_sidebar_close" title="'+e.lang[e.language].buttons.close+'"><i class="fac-i-close"></i></a></div>  </header>  <ul class="facilitas_sidebar_cont">      <li>          <label for="facilitas_language" title="'+e.lang[e.language].sidebarSettings.language.title+'">'+e.lang[e.language].sidebarSettings.language.title+'</label>          <select name="facilitas_language" class="facilitas_language" title="'+e.lang[e.language].sidebarSettings.language.title+'">              <option value="'+e.lang[e.language].about.file+'" title="'+e.lang[e.language].about.title+'" selected="selected">'+e.lang[e.language].about.title+'</option>          </select>      </li>      <li>          <label for="facilitas_toolbarPosition" title="'+e.lang[e.language].sidebarSettings.toolbar.position.title+'">'+e.lang[e.language].sidebarSettings.toolbar.position.title+'</label>          <select name="facilitas_toolbarPosition" class="facilitas_toolbarPosition" title="'+e.lang[e.language].sidebarSettings.toolbar.position.title+'">              <option value="bottom" title="'+e.lang[e.language].sidebarSettings.toolbar.position.posBottom+'" selected="selected">'+e.lang[e.language].sidebarSettings.toolbar.position.posBottom+'</option>          </select>      </li>      <li>          <label for="captionStyleTitle" title="'+e.lang[e.language].sidebarSettings.caption.captionStyle+'">'+e.lang[e.language].sidebarSettings.caption.captionStyle+'</label>          <label class="facilitas_label_subtitle" for="facilitas_fontbackground" title="'+e.lang[e.language].sidebarSettings.caption.backgroundColor.title+'">'+e.lang[e.language].sidebarSettings.caption.backgroundColor.title+'</label>          <select name="facilitas_fontbackground" class="facilitas_fontbackground" title="'+e.lang[e.language].sidebarSettings.caption.backgroundColor.title+'">              <option value="none" selected="selected" title="'+e.lang[e.language].sidebarSettings.caption.backgroundColor.opNoBackground+'">'+e.lang[e.language].sidebarSettings.caption.backgroundColor.opNoBackground+'</option>              <option value="black" title="'+e.lang[e.language].sidebarSettings.caption.backgroundColor.opBlack+'">'+e.lang[e.language].sidebarSettings.caption.backgroundColor.opBlack+'</option>              <option value="halfblack" title="'+e.lang[e.language].sidebarSettings.caption.backgroundColor.opTransBlack+'">'+e.lang[e.language].sidebarSettings.caption.backgroundColor.opTransBlack+'</option>              <option value="white" title="'+e.lang[e.language].sidebarSettings.caption.backgroundColor.opWhite+'">'+e.lang[e.language].sidebarSettings.caption.backgroundColor.opWhite+'</option>              <option value="halfwhite" title="'+e.lang[e.language].sidebarSettings.caption.backgroundColor.opTransWhite+'">'+e.lang[e.language].sidebarSettings.caption.backgroundColor.opTransWhite+'</option>          </select>          <label class="facilitas_label_subtitle" for="facilitas_fontfamily" title="'+e.lang[e.language].sidebarSettings.caption.fontFamily+'">'+e.lang[e.language].sidebarSettings.caption.fontFamily+'</label>          <select name="facilitas_fontfamily" class="facilitas_fontfamily" title="'+e.lang[e.language].sidebarSettings.caption.fontFamily+'">          </select>          <div class="facilitas_settings_split">              <label class="facilitas_label_subtitle" for="facilitas_fontcolor" maxlength="7" title="'+e.lang[e.language].sidebarSettings.caption.fontColor+'">'+e.lang[e.language].sidebarSettings.caption.fontColor+'</label>              <input name="facilitas_fontcolor" class="facilitas_fontcolor" title="'+e.lang[e.language].sidebarSettings.caption.fontColor+'" value="E1EB1A" placeholder="E1EB1A" />          </div>          <div class="facilitas_settings_splitright">              <label class="facilitas_label_subtitle" for="facilitas_fontsize" title="'+e.lang[e.language].sidebarSettings.caption.fontSize+'">'+e.lang[e.language].sidebarSettings.caption.fontSize+'</label>              <select name="facilitas_fontsize" class="facilitas_fontsize" title="'+e.lang[e.language].sidebarSettings.caption.fontSize+'">                  <option value="8">8</option>                  <option value="10">10</option>                  <option value="12">12</option>                  <option value="14" selected="selected">14</option>                  <option value="16">16</option>                  <option value="18">18</option>                  <option value="20">20</option>                  <option value="24">24</option>                  <option value="30">30</option>                  <option value="36">36</option>                  <option value="40">40</option>              </select>          </div>      </li>  </ul></section><div class="facilitas_loading"><div class="facilitas_loading_img"></div></div><a href="#" class="facilitas_btn_light" title="'+e.lang[e.language].lights.turnOff+'"><i class="fac-i-light"></i></a>');i.addClass("facilitas_video"),i.wrap(l),i.after(r),i.wrap(a("<div/>")).parent().addClass("facilitas_player_video"),e.hasTags&&o.appendTo(a(".facilitas_tags")),a("body").append(e.facilitas_light_bg),e.videoObject=i[0],t.getInstances(),t.bindControlActions(),t.bindVideoActions(),e.enableKeyboard===!0&&t.bindKeyboardShortcuts(),t.disableBtn(e.facilitas_cc),t.prepareSubtitle(),t.checkSupport(),t.checkAdditionalLanguages(),i.removeAttr("controls"),t.startTemplate()}).fail(function(){alert("Couldn't load language file!")})},startTemplate:function(){var a=this,t=this.options,e=this.options.facilitas_toolbar.height(),l=t.facilitas_progress.height(),s=(a.$elem.prop("width"),a.$elem.prop("height")),o=t.facilitas_tags.height(),c=s+e+l;for(o&&(c+=o),t.video_container.height(c-15),o?t.facilitas_subtitle.css("bottom",e+o+10):(t.facilitas_toolbar.css("bottom",0),t.facilitas_subtitle.css("bottom",e+17)),o?t.facilitas_progress.css("bottom",o+e-5):t.facilitas_progress.css("bottom",e),t.facilitas_fontcolor.minicolors({letterCase:"uppercase",swatchPosition:"right",change:function(t){a.changeColor(t)}}),i=0,n=t.fonts.length;n>i;i++){var r="";0==i&&(r=' selected="selected"'),t.facilitas_fontfamily.append('<option value="'+t.fonts[i]+'" title="'+t.fonts[i]+'"'+r+">"+t.fonts[i]+"</option>")}t.facilitas_caption_search.height(c-17),t.facilitas_search_result.height(c-t.facilitas_caption_search.find("header").height()-12)},getInstances:function(){var t=this.options;t.video_container=this.$elem.parents(".facilitas_player");t.video_container;t.video_controls=a(".facilitas_controls",t.video_container),t.facilitas_play=a(".facilitas_btn_play",t.video_container),t.facilitas_stop=a(".facilitas_btn_stop",t.video_container),t.facilitas_speedup=a(".facilitas_btn_speedup",t.video_container),t.facilitas_speeddown=a(".facilitas_btn_speeddown",t.video_container),t.facilitas_speedwarning=a(".facilitas_speedwarning",t.video_container),t.facilitas_search_btn=a(".facilitas_btn_search",t.video_container),t.facilitas_settings_btn=a(".facilitas_btn_settings",t.video_container),t.facilitas_video_seek=a(".facilitas_progbar",t.video_container),t.facilitas_video_buffer=a(".facilitas_buffbar",t.video_container),t.facilitas_video_timer=a(".facilitas_timeupdate",t.video_container),t.facilitas_volume=a(".facilitas_btn_volume",t.video_container),t.facilitas_volume_btn=a(".facilitas_btn_container",t.video_container),t.facilitas_volume_status=a(".vol_status",t.video_container),t.facilitas_cc=a(".facilitas_btn_cc",t.video_container),t.facilitas_volume_slider=a(".facilitas_control_volume_slider",t.video_container),t.facilitas_volume_cont=a(".facilitas_vol_container",t.video_container),t.facilitas_help=a(".facilitas_help",t.video_container),t.facilitas_help_btn=a(".facilitas_btn_help",t.video_container),t.facilitas_viewport=a(".facilitas_btn_viewport",t.video_container),t.facilitas_tags=a(".facilitas_tags",t.video_container),t.facilitas_tags_goto=a(".facilitas_tags_goto",t.video_container),t.facilitas_stickers=a(".facilitas_stickers",t.video_container),t.facilitas_progress=a(".facilitas_progress",t.video_container),t.facilitas_toolbar=a(".facilitas_toolbar",t.video_container),t.facilitas_subtitle=a(".facilitas_subtitle",t.video_container),t.facilitas_light_toggle=a(".facilitas_btn_light",t.video_container),t.facilitas_loading=a(".facilitas_loading",t.video_container),t.facilitas_caption_search=a(".facilitas_caption_search",t.video_container),t.facilitas_search_form=a(".facilitas_fsearch",t.video_container),t.facilitas_search_result=a(".facilitas_search_result",t.video_container),t.facilitas_search_input=a(".facilitas_search_input",t.video_container),t.facilitas_search_inputbtn=a(".facilitas_btn_inputsearch",t.video_container),t.facilitas_sidebar_close=a(".facilitas_sidebar_close",t.video_container),t.facilitas_settings=a(".facilitas_settings",t.video_container),t.facilitas_toolbarposition=a(".facilitas_toolbarposition",t.video_container),t.facilitas_language=a(".facilitas_language",t.video_container),t.facilitas_fontfamily=a(".facilitas_fontfamily",t.video_container),t.facilitas_fontbackground=a(".facilitas_fontbackground",t.video_container),t.facilitas_fontcolor=a(".facilitas_fontcolor",t.video_container),t.facilitas_fontsize=a(".facilitas_fontsize",t.video_container)},initInstances:function(){var t=this,i=this.options;if(0==i.init){var e=i.videoObject.duration;if(i.facilitas_video_seek.slider({value:0,step:.01,orientation:"horizontal",range:"min",max:e,animate:!0,slide:function(a,e){t.timeUpdate(e.value),i.seekSliding=!0},stop:function(){i.seekSliding=!1},change:function(){t.updateBufferRange()}}),i.facilitas_video_seek.val(30),i.facilitas_video_buffer.slider({range:!0,disabled:!0,min:0,max:100,values:[0,100]}),i.facilitas_volume_slider.slider({value:i.initVolume,orientation:"vertical",range:"min",max:1,step:.1,animate:!0,slide:function(a,i){t.toggleMute(i.value)}}),t.playbackRate=i.videoSpeed,t.$elem.prop("volume",i.initVolume),i.hasTags){var l=i.facilitas_video_seek.slider("option","max");a("a",i.facilitas_tags).each(function(){var e=a(this).attr("href").substr(1),e=t.secondsTimeFormat(e),n=100*e/l;i.facilitas_stickers.append('<li style="left:'+n+'%"><a href="#"></a></li>')})}i.init=!0}},bindControlActions:function(){var t=this,i=this.options;i.facilitas_play.on("click",function(a){return t.play(),a.preventDefault(),!1}),this.$elem.on("click",function(a){return t.play(),a.preventDefault(),!1}),i.facilitas_stop.on("click",function(a){return t.stop(),a.preventDefault(),!1}),i.facilitas_speeddown.on("click",function(a){return t.rewind(),a.preventDefault(),!1}),i.facilitas_speedup.on("click",function(a){return t.forward(),a.preventDefault(),!1}),i.facilitas_viewport.on("click",function(a){return t.toggleFullScreen(),a.preventDefault(),!1}),i.facilitas_light_toggle.on("click",function(a){return t.toggleLight(),a.preventDefault(),!1}),i.facilitas_search_btn.on("click",function(a){return t.closeSidebar("search",function(){t.toggleCaptionSearchSidebar()}),a.preventDefault(),!1}),i.facilitas_settings_btn.on("click",function(a){return t.closeSidebar("settings",function(){t.toggleSettingsSidebar()}),a.preventDefault(),!1}),i.facilitas_help_btn.on("click",function(a){return t.toggleHelp(),a.preventDefault(),!1}),i.facilitas_sidebar_close.on("click",function(a){return t.closeSidebar(),a.preventDefault(),!1}),i.facilitas_volume_btn.on("click",function(a){return t.toggleMute(null),a.preventDefault(),!1}),i.facilitas_volume.on("mouseenter",function(){t.showVolumeBar()}).on("mouseleave",function(){t.hideVolumeBar()}),i.facilitas_search_result.on("click","a",function(i){var e=a(this).attr("href").substr(1);return t.goTo(e),i.preventDefault(),!1}),i.facilitas_tags.on("click","a",function(i){var e=a(this).attr("href").substr(1),e=t.secondsTimeFormat(e);return t.timeUpdate(e),i.preventDefault(),!1}).on("mouseenter","li",function(){var t=a(this).index();i.facilitas_stickers.find("li:nth-child("+(t+1)+") a").addClass("facilitas_selected")}).on("mouseleave","li",function(){a(".facilitas_selected",i.facilitas_stickers).removeClass("facilitas_selected")}),i.facilitas_stickers.on("mouseenter","li",function(){var t=a(this).index();i.facilitas_tags.find("li:nth-child("+(t+1)+") a").addClass("facilitas_selected")}).on("mouseleave","li",function(){a(".facilitas_selected",i.facilitas_tags).removeClass("facilitas_selected")}).on("click",function(a){return a.preventDefault(),!1}),i.video_container.on({mouseenter:function(){i.isFullscreen||t.showLightBtn()},mouseleave:function(){i.isFullscreen||t.hideLightBtn()}}),i.facilitas_search_form.on("submit",function(){return t.searchSubtitle(),!1}),i.facilitas_search_inputbtn.on("click",function(a){return t.searchSubtitle(),a.preventDefault(),!1}),a(window).resize(function(){t.updateLightPos(!1)}),i.facilitas_language.on("change",function(){a("option:selected",a(this)).each(function(){var e=a(this).val();e!=i.language&&(i.language=e,t.renderLanguage())})}),i.facilitas_fontbackground.on("change",function(){a("option:selected",a(this)).each(function(){var t=a(this).val(),e="nobackground black halfblack white halfwhite";switch(i.facilitas_subtitle.removeClass(e),t){case"none":i.facilitas_subtitle.addClass("nobackground");break;case"black":i.facilitas_subtitle.addClass("black");break;case"halfblack":i.facilitas_subtitle.addClass("halfblack");break;case"white":i.facilitas_subtitle.addClass("white");break;case"halfwhite":i.facilitas_subtitle.addClass("halfwhite");break;default:i.facilitas_subtitle.addClass("nobackground")}})}),i.facilitas_fontfamily.on("change",function(){a("option:selected",a(this)).each(function(){var t=a(this).val();i.facilitas_subtitle.css("font-family",t)})}),i.facilitas_fontcolor.on("keyup",function(){var i=a(this).val();t.changeColor(i)}),i.facilitas_fontsize.on("change",function(){a("option:selected",a(this)).each(function(){var e=a(this).val();i.facilitas_subtitle.css({"font-size":e+"pt","line-height":e+"pt"}),t.subtitleFontUpdate()})})},bindVideoActions:function(){var a=this,t=this.options;a.$elem.bind("play",function(){a.hideLoading(),t.facilitas_play.removeClass("facilitas_btn_play").addClass("facilitas_btn_pause").html('<i class="fac-i-pause"></i>')}).bind("pause",function(){t.facilitas_play.removeClass("facilitas_btn_pause").addClass("facilitas_btn_play").html('<i class="fac-i-play"></i>')}).bind("playing loadedmetadata updateMediaState canplay",function(){a.initInstances()}).bind("loadstart",function(){a.showLoading()}).bind("canplay canplaythrough loadeddata",function(){a.hideLoading()}).bind("stalled waiting",function(){a.showLoading()}).bind("timeupdate",function(){a.seekUpdate(),t.subtitle&&a.subtitleUpdate(),t.closedCaption&&a.closedCaptionUpdate()}).bind("volumechange",function(){a.volumeUpdate()}).bind("progress",function(){a.bufferUpdate()})},bindKeyboardShortcuts:function(){var t=this,i=this.options;a(document).on("keyup",function(e){if(a("input").is(":focus")||a("textarea").is(":focus"))return!1;switch(e.which){case 80:t.play();break;case 82:t.rewind();break;case 70:t.forward();break;case 67:t.toggleSubtitle();break;case 84:break;case 65:t.toggleMute(null);break;case 85:i.init&&t.increaseVolume();break;case 68:i.init&&t.decreaseVolume();break;case 83:t.toggleCaptionSearchSidebar();break;case 76:t.toggleFullScreen();break;case 72:t.toggleHelp();break;case 69:t.speedDown();break;case 79:t.speedUp();break;case 81:t.stop();break;case 219:t.rewind();break;case 221:t.forward()}})},checkSupport:function(){var a=this,t=this.options;if("undefined"!=typeof document.cancelFullScreen)a.supportsFullScreen=!0;else{for(var i=0;i<t.browserPrefixes.length;i++)if(t.browserPrefix=t.browserPrefixes[i],"undefined"!=typeof document[t.browserPrefix+"CancelFullScreen"]){t.supportsFullScreen=!0;break}"webkit"!=t.browserPrefix?(a.disableBtn(t.facilitas_speedup),a.disableBtn(t.facilitas_speeddown),t.supportsSpeedChange=!1):t.supportsSpeedChange=!0}},checkAdditionalLanguages:function(){for(var a=this.options,t=0,i=a.availableLanguages.length;i>t;t++){var e=a.availableLanguages[t];e!=a.language&&this.getLanguage(e)}},getLanguage:function(t){var i=this.options;a.getJSON(i.baseLangFolder+"FacilitasLang/"+t+".js",function(a){i.lang[t]=a,i.facilitas_language.append('<option value="'+a.about.file+'" title="'+a.about.title+'">'+a.about.title+"</option>")})},renderLanguage:function(){var t=this.options,i=t.video_container,e=a(".facilitas_caption_search",i);e.find(".facilitas_sidebar_title").attr("title",t.lang[t.language].sidebarSearch.title).find("span").html(t.lang[t.language].sidebarSearch.title).siblings("a").attr("title",t.lang[t.language].buttons.close),e.find(".facilitas_search_input").attr("title",t.lang[t.language].sidebarSearch.input).attr("title",t.lang[t.language].sidebarSearch.input),e.find(".facilitas_btn_inputsearch").attr("title",t.lang[t.language].sidebarSearch.button),e=a(".facilitas_settings",i),e.find(".facilitas_sidebar_title").attr("title",t.lang[t.language].sidebarSettings.title).find("span").html(t.lang[t.language].sidebarSettings.title).siblings("a").attr("title",t.lang[t.language].buttons.close),e.find("label[for=facilitas_language]").attr("title",t.lang[t.language].sidebarSettings.language.title).html(t.lang[t.language].sidebarSettings.language.title).siblings("select").attr("title",t.lang[t.language].sidebarSettings.language.title),e.find("label[for=facilitas_toolbarPosition]").attr("title",t.lang[t.language].sidebarSettings.toolbar.position.title).html(t.lang[t.language].sidebarSettings.toolbar.position.title).siblings("select").attr("title",t.lang[t.language].sidebarSettings.toolbar.position.title).find("option").attr("title",t.lang[t.language].sidebarSettings.toolbar.position.posBottom).html(t.lang[t.language].sidebarSettings.toolbar.position.posBottom),e.find("label[for=captionStyleTitle]").attr("title",t.lang[t.language].sidebarSettings.caption.captionStyle).html(t.lang[t.language].sidebarSettings.caption.captionStyle).siblings("label[for=facilitas_fontbackground]").attr("title",t.lang[t.language].sidebarSettings.caption.backgroundColor.title).html(t.lang[t.language].sidebarSettings.caption.backgroundColor.title).siblings(".facilitas_fontbackground").attr("title",t.lang[t.language].sidebarSettings.caption.backgroundColor.title).html('<option value="none" selected="selected" title="'+t.lang[t.language].sidebarSettings.caption.backgroundColor.opNoBackground+'">'+t.lang[t.language].sidebarSettings.caption.backgroundColor.opNoBackground+'</option><option value="black" title="'+t.lang[t.language].sidebarSettings.caption.backgroundColor.opBlack+'">'+t.lang[t.language].sidebarSettings.caption.backgroundColor.opBlack+'</option><option value="halfblack" title="'+t.lang[t.language].sidebarSettings.caption.backgroundColor.opTransBlack+'">'+t.lang[t.language].sidebarSettings.caption.backgroundColor.opTransBlack+'</option><option value="white" title="'+t.lang[t.language].sidebarSettings.caption.backgroundColor.opWhite+'">'+t.lang[t.language].sidebarSettings.caption.backgroundColor.opWhite+'</option><option value="halfwhite" title="'+t.lang[t.language].sidebarSettings.caption.backgroundColor.opTransWhite+'">'+t.lang[t.language].sidebarSettings.caption.backgroundColor.opTransWhite+"</option>").siblings("label[for=facilitas_fontfamily]").attr("title",t.lang[t.language].sidebarSettings.caption.fontFamily).html(t.lang[t.language].sidebarSettings.caption.fontFamily).siblings(".facilitas_fontfamily").attr("title",t.lang[t.language].sidebarSettings.caption.fontFamily),e.find("label[for=facilitas_fontcolor]").attr("title",t.lang[t.language].sidebarSettings.caption.fontColor).html(t.lang[t.language].sidebarSettings.caption.fontColor),e.find("label[for=facilitas_fontsize]").attr("title",t.lang[t.language].sidebarSettings.caption.fontSize).html(t.lang[t.language].sidebarSettings.caption.fontSize).siblings(".facilitas_fontsize").attr("title",t.lang[t.language].sidebarSettings.caption.fontSize);var e=a(".facilitas_btn_light",i);t.isLightOn?e.attr("title",t.lang[t.language].lights.turnOn).removeClass("active"):e.attr("title",t.lang[t.language].lights.turnOff).addClass("active"),t.facilitas_play.attr("title",t.lang[t.language].toolbar.play),t.facilitas_stop.attr("title",t.lang[t.language].toolbar.stop),t.facilitas_speeddown.attr("title",t.lang[t.language].toolbar.speeddown),t.facilitas_speedup.attr("title",t.lang[t.language].toolbar.speedup),t.facilitas_video_timer.attr("title",t.lang[t.language].toolbar.time),t.facilitas_search_btn.attr("title",t.lang[t.language].toolbar.search),t.facilitas_cc.attr("title",t.lang[t.language].toolbar.caption),t.facilitas_settings_btn.attr("title",t.lang[t.language].toolbar.settings),t.facilitas_volume.attr("title",t.lang[t.language].toolbar.volume),t.facilitas_viewport.attr("title",t.lang[t.language].toolbar.viewport),t.facilitas_help.find(".facilitas_help_title").attr("title",t.lang[t.language].help.title).html(t.lang[t.language].help.title).siblings(".facilitas_help_content").first().find("ul").html('<li title="'+t.lang[t.language].help.keyboard+'"><strong>'+t.lang[t.language].help.keyboard+'</strong></li>          <li title="P - '+t.lang[t.language].help.play+'"><strong>P</strong>'+t.lang[t.language].help.play+'</li>          <li title="Q - '+t.lang[t.language].help.stop+'"><strong>Q</strong>'+t.lang[t.language].help.stop+'</li>          <li title="S - '+t.lang[t.language].help.search+'"><strong>S</strong>'+t.lang[t.language].help.search+'</li>          <li title="O - '+t.lang[t.language].help.speeddown+'"><strong>O</strong>'+t.lang[t.language].help.speeddown+'</li>          <li title="E - '+t.lang[t.language].help.speedup+'"><strong>E</strong>'+t.lang[t.language].help.speedup+'</li>          <li title="[ - '+t.lang[t.language].help.rewind+'"><strong>O</strong>'+t.lang[t.language].help.rewind+'</li>          <li title="] - '+t.lang[t.language].help.forward+'"><strong>O</strong>'+t.lang[t.language].help.forward+'</li>          <li title="C - '+t.lang[t.language].help.caption+'"><strong>C</strong>'+t.lang[t.language].help.caption+'</li>          <li title="A - '+t.lang[t.language].help.volume+'"><strong>A</strong>'+t.lang[t.language].help.volume+'</li>          <li title="D - '+t.lang[t.language].help.decreaseVol+'"><strong>D</strong>'+t.lang[t.language].help.decreaseVol+'</li>          <li title="U - '+t.lang[t.language].help.increaseVol+'"><strong>U</strong>'+t.lang[t.language].help.increaseVol+'</li>          <li title="L - '+t.lang[t.language].help.viewport+'"><strong>L</strong>'+t.lang[t.language].help.viewport+'</li>          <li title="H - '+t.lang[t.language].help.help+'"><strong>H</strong>'+t.lang[t.language].help.help+"</li>"),t.facilitas_help.find(".facilitas_help_about ul").html("<li>Facilitas Player v"+t.version+"</li>          <li>"+t.lang[t.language].help.developed+' <a href="mailto:contato@brunoramos.eti.br" title="Bruno Ramos">Bruno Ramos</a></li>          <li><a href="'+t.aboutUrl+'" target="_blank" title="Facilitas Player">'+t.aboutUrl+"</a></li>"),t.hasTags&&t.facilitas_tags_goto.attr("title",t.lang[t.language].tags.goTo).html(t.lang[t.language].tags.goTo+":")},prepareSubtitle:function(){var t=this,i=this.options,e=i.subtitleSrc;t.$elem.children().each(function(){var t=a(this).get(0);"track"==t.nodeName.toLowerCase()&&"subtitle"==t.getAttribute("kind")&&(e=t.getAttribute("src"))}),e?-1!=e.indexOf(".srt")?(t.subtitleFontUpdate(),a.get(e,function(a){if(a.length>0){i.subtitle=new Array;for(var e=a.split("\n\n"),l=e.length,n=0;l>n;n++)i.subtitle[n]=e[n].split("\n");i.subtitleTotal=l,t.enableSubtitleBtn()}else t.disableBtn(i.facilitas_search_btn),i.debug&&t.trace("Invalid subtitle source. Maybe using a cross-domain source?")})):(t.disableBtn(i.facilitas_search_btn),i.debug&&t.trace('Not a valid subtitle source. File must be ".srt".')):(t.disableBtn(i.facilitas_search_btn),i.debug&&t.trace("No subtitle track found."))
},play:function(){var a=this.options.videoObject;a.paused?a.play():a.pause()},stop:function(){var a=this.options.videoObject;a.pause(),a.currentTime=0},toggleCCBtn:function(a){var t=this,i=this.options;switch(a){case"CC":t.toggleClosedCaption();break;case"SE":t.toggleSubtitle();break;default:i.debug&&t.trace("Invalid type. => "+a)}},toggleSubtitle:function(){var a=this.options,t=a.facilitas_cc;t.hasClass("facilitas_btn_cc_disabled")?(t.removeClass("facilitas_btn_cc_disabled"),a.facilitas_subtitle.show()):(t.addClass("facilitas_btn_cc_disabled"),a.facilitas_subtitle.hide())},toggleMute:function(a){var t=this,i=this.options;a>0?(i.facilitas_volume_status.removeClass("fac-i-sound-muted"),a>=.9?i.facilitas_volume_status.removeClass("fac-i-sound-half").addClass("fac-i-sound-full"):i.facilitas_volume_status.removeClass("fac-i-sound-full").addClass("fac-i-sound-half"),t.$elem.prop("muted",!1),t.$elem.prop("volume",a)):1==t.$elem.prop("muted")?(i.facilitas_volume_status.removeClass("fac-i-sound-muted"),a>=.9?i.facilitas_volume_status.removeClass("fac-i-sound-half").addClass("fac-i-sound-full"):i.facilitas_volume_status.removeClass("fac-i-sound-full").addClass("fac-i-sound-half"),t.$elem.prop("muted",!1),null!=i.oldVol&&(t.$elem.prop("volume",i.oldVol),i.oldVol=null)):(i.oldVol=i.facilitas_volume_slider.slider("value"),i.facilitas_volume_status.removeClass("fac-i-sound-full fac-i-sound-half").addClass("fac-i-sound-muted"),t.$elem.prop("muted",!0),t.$elem.prop("volume",0))},rewind:function(){var a=this.options.videoObject,t=a.currentTime;t=0>t-10?0:t-10,this.timeUpdate(t)},forward:function(){var a=this.options.videoObject,t=a.currentTime,i=a.duration;t=t+10>i?i:t+10,this.timeUpdate(t)},speedDown:function(){var a=this.options;a.supportsSpeedChange&&(.0625!=a.videoSpeed&&(a.videoSpeed=a.videoSpeed/2),this.$elem.prop("playbackRate",a.videoSpeed),this.updateSpeedDisplay())},speedUp:function(){var a=this.options;a.supportsSpeedChange&&(16!=a.videoSpeed&&(a.videoSpeed=2*a.videoSpeed),this.$elem.prop("playbackRate",a.videoSpeed),this.updateSpeedDisplay())},updateSpeedDisplay:function(){var a=this.options;1==a.videoSpeed?a.facilitas_speedwarning.hide():a.facilitas_speedwarning.html(a.videoSpeed+"x").show()},updateLightPos:function(t){var i=this,e=this.options,l=-1*i.options.video_container.width()/2,n=-1*i.options.video_container.height()/2,s=(a(window).width(),a(window).height(),a(window).height()/2-i.options.facilitas_toolbar.height());i.options.isLightOn||t?(e.video_container.appendTo(e.body),e.video_container.css({position:"fixed",left:"50%",top:s,"margin-left":l,"margin-top":n}),e.facilitas_light_bg.addClass("active")):e.facilitas_light_bg.removeClass("active")},toggleLight:function(){var a=this,t=this.options;t.isLightOn?(t.video_container.css({position:"relative",left:0,top:0,"margin-left":0,"margin-top":0}).appendTo(t.parent),t.facilitas_light_bg.removeClass("active"),t.video_container.removeClass("lightson"),t.facilitas_light_toggle.removeClass("active"),t.facilitas_light_toggle.attr("title",t.lang[t.language].lights.turnOff),t.isLightOn=!1):(t.facilitas_light_bg.addClass("active"),t.video_container.addClass("lightson"),a.updateLightPos(!0),t.facilitas_light_toggle.addClass("active"),t.facilitas_light_toggle.attr("title",t.lang[t.language].lights.turnOn),t.isLightOn=!0)},toggleHelp:function(){var a=this.options;a.helpIsOpen?(a.facilitas_help.fadeOut(100),a.helpIsOpen=!1):(a.facilitas_help.fadeIn(100),a.helpIsOpen=!0)},showVolumeBar:function(){this.options.facilitas_volume_cont.show()},hideVolumeBar:function(){this.options.facilitas_volume_cont.hide()},increaseVolume:function(){var a=this.options,t=a.facilitas_volume_slider.slider("value");0==t?(this.toggleMute(),t=.2):t=t+.2>1?1:t+.2,this.$elem.prop("volume",t)},decreaseVolume:function(){var a=this.options,t=a.facilitas_volume_slider.slider("value");0>=t-.2?this.toggleMute():this.$elem.prop("volume",t-.2)},cancelFullScreen:function(){var a=this,t=a.options;if(t.isFullScreen){if(a.$elem.width(a.$elem.prop("width")),""===t.Prefix)a.cancelFullScreen();else{{t.browserPrefix}document[t.browserPrefix+"CancelFullScreen"]()}t.isFullScreen=!1,t.facilitas_viewport.removeClass("facilitas_btn_viewport_close").attr("title",t.lang[t.language].toolbar.viewport).html('<i class="fac-i-fullscreen-open"></i>')}},toggleFullScreen:function(){var a=this.options;a.supportsFullScreen?a.isFullScreen?this.cancelFullScreen():this.enableFullScreen():alert("Seu navegador não suporta fullscreen!")},enableSubtitleBtn:function(){var a=this,t=a.options;t.facilitas_cc.removeClass("facilitas_btn_cc_disabled"),t.facilitas_cc.off().on("click",function(t){return a.toggleSubtitle(),t.preventDefault(),!1})},enableFullScreen:function(){var t=this,i=t.options;if(!i.isFullScreen){if(t.$elem.width("100%"),""===i.Prefix)t.requestFullScreen();else{{i.browserPrefix}i.video_container[0][i.browserPrefix+"RequestFullScreen"]()}i.isFullScreen=!0,i.facilitas_viewport.addClass("facilitas_btn_viewport_close").attr("title",i.lang[i.language].toolbar.viewportClose).html('<i class="fac-i-fullscreen-close"></i>'),a(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){t.hideLightBtn(),t.fullScreenStatus()||t.$elem.width(t.$elem.prop("width")),t.subtitleFontUpdate()})}},showLightBtn:function(){this.options.facilitas_light_toggle.fadeIn(100)},hideLightBtn:function(){this.options.facilitas_light_toggle.fadeOut(100)},showLoading:function(){var a=this.options;a.loading||(a.facilitas_loading.show(),a.loading=!0)},hideLoading:function(){var a=this.options;a.loading&&(a.facilitas_loading.hide(),a.loading=!1)},closeSidebar:function(a,t){this.options.sidebar_captionsearch&&"search"!=a?this.hideCaptionSearchSidebar(function(){t&&t()}):this.options.sidebar_settings&&"settings"!=a?this.hideSettingsSidebar(function(){t&&t()}):t&&t()},toggleCaptionSearchSidebar:function(a){this.cancelFullScreen(),this.options.sidebar_captionsearch?this.hideCaptionSearchSidebar(function(){a&&a()}):this.showCaptionSearchSidebar(function(){a&&a()})},showCaptionSearchSidebar:function(a){var t=this.options,i=-1*this.options.facilitas_caption_search.width()-2;t.facilitas_caption_search.animate({right:i},200,function(){t.sidebar_captionsearch=!0,t.facilitas_search_input.focus(),a&&a()})},hideCaptionSearchSidebar:function(a){var t=this.options;t.facilitas_caption_search.animate({right:0},200,function(){t.sidebar_captionsearch=!1,a&&a()})},toggleSettingsSidebar:function(a){this.cancelFullScreen(),this.options.sidebar_settings?this.hideSettingsSidebar(function(){a&&a()}):this.showSettingsSidebar(function(){a&&a()})},showSettingsSidebar:function(a){var t=this.options,i=-1*this.options.facilitas_settings.width()-2;t.facilitas_settings.animate({right:i},200,function(){t.sidebar_settings=!0,a&&a()})},hideSettingsSidebar:function(a){var t=this.options;t.facilitas_settings.animate({right:0},200,function(){t.sidebar_settings=!1,a&&a()})},searchSubtitle:function(){var a=this,t=this.options,e=t.facilitas_search_input.val(),l=!1;if(t.subtitle)if(e.length>0){for(t.facilitas_search_result.empty(),i=0,n=t.subtitle.length;n>i;i++)if(-1!=t.subtitle[i][2].toLowerCase().indexOf(e.toLowerCase())){l=!0;var s=a.getSearchResultTime(t.subtitle[i][1]);t.facilitas_search_result.append('<li>  <a href="#'+s[0]+'" title="'+s[0]+'">      <span class="facilitas_search_time">['+s[0]+" - "+s[1]+']</span>      <p class="facilitas_search_description">'+t.subtitle[i][2]+"</p>  </a></li>")}l||t.facilitas_search_result.empty().append("<li>"+t.lang[t.language].sidebarSearch.notfound+"</li>")}else a.options.debug&&a.trace("Empty input, cannot search!");else a.options.debug&&a.trace("No subtitle file loaded.")},disableBtn:function(a){var t=this;a.addClass("disabled"),a.off().on("click",function(a){return t.trace("Your browser doesn't support this feature."),a.preventDefault(),!1})},changeColor:function(a){var t=this,i=this.options;a.length>=6?(6==a.length&&"#"!=a.substr(0,1)&&(i.facilitas_fontcolor.val("#"+a),a="#"+a),i.facilitas_subtitle.css("color",a)):i.debug&&t.trace("Invalid color")},timeUpdate:function(a){var t=this.options.videoObject;t.currentTime=a},goTo:function(a){var a=this.secondsTimeFormat(a);this.timeUpdate(a)},seekUpdate:function(){var a=this.options.videoObject;if(this.options.init){var t=a.currentTime;this.options.seekSliding||this.options.facilitas_video_seek.slider("value",t);var i=this.videoTimeFormat(t),e=this.videoTimeFormat(a.duration);this.options.facilitas_video_timer.text(i+" / "+e)}},updateBufferRange:function(){for(var a=this.options.videoObject,t=a.buffered,i=0;i<t.length;i++){var e=t.start(i),l=t.end(i);a.currentTime>=e&&a.currentTime<=l&&(this.options.currentBuffer=i)}},bufferUpdate:function(){var a=this.options.videoObject;if(this.options.init){var t=0,i=a.buffered;t=i&&i.length>0&&i.end&&a.duration?i.end(this.options.currentBuffer)/a.duration:a.bufferedBytes/a.bytesTotal,t*=100;var e=i.start(this.options.currentBuffer)<0?0:i.start(this.options.currentBuffer)/a.duration*100;this.options.facilitas_video_buffer.slider("values",[e,t])}},volumeUpdate:function(){var a=this.options.videoObject;this.options.facilitas_volume_slider.slider("value",a.volume)},subtitleUpdate:function(){var a=this,t=this.options,e=a.$elem.prop("currentTime"),l="";for(i=0;i<t.subtitleTotal;i++)a.subtitleGetTime(t.subtitle[i][1],"min")<e&&a.subtitleGetTime(t.subtitle[i][1],"max")>e&&(l=t.subtitle[i][2]);t.facilitas_subtitle.html(l)},subtitleFontUpdate:function(){var a=this,t=a.options.facilitas_subtitle.css("font-size"),i=a.options.facilitas_subtitle.css("bottom");a.$elem.width()>400&&(t+=Math.ceil((a.$elem.width()-400)/100),i+=Math.ceil((a.$elem.width()-400)/100));var e=parseInt(t)+4;a.options.facilitas_subtitle.css({"font-size":t+"px","line-height":e+"px",bottom:i+"px"})},videoTimeFormat:function(a){var t=Math.floor(a/60)<10?"0"+Math.floor(a/60):Math.floor(a/60),i=Math.floor(a-60*t)<10?"0"+Math.floor(a-60*t):Math.floor(a-60*t);return t+":"+i},secondsTimeFormat:function(a){var t=a.split(":");if(2==t.length)var i=parseInt(t[1])+60*parseInt(t[0]);else if(3==t.length)var i=parseInt(t[2])+60*parseInt(t[1])+60*parseInt(t[0])*60;return i},subtitleTimeFix:function(a){var t=a.split(",")[0].split(":");return Math.floor(60*t[0]*60)+Math.floor(60*t[1])+Math.floor(t[2])+parseFloat("."+a.split(",")[1])},subtitleGetTime:function(a,t){return this.subtitleTimeFix("min"==t?a.split(" --> ")[0]:a.split(" --> ")[1])},getSearchResultTime:function(a){var t=a.split(" --> "),i=t[0].split(",")[0],e=t[1].split(",")[0],l=new Array(2);return l[0]=i,l[1]=e,l},trace:function(a){try{console.log(a)}catch(t){alert(a)}},fullScreenStatus:function(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||!1}};a.fn.extend=function(i){return this.length?this.each(function(){var e=Object.create(t);t.init(i,this),a.data(this,"FacilitasPlayer",e)}):void 0},a.plugin("facilitas",t)}(jQuery);